jQuery(function(p){var i,s=p(".choice"),r=p(".p-contact__select-trigger"),c=p(".p-contact__select-options"),n=p(".p-contact__select-option"),_=(r.on("click",function(){p(this).toggleClass("active"),c.toggleClass("active")}),n.on("click",function(){var t=p(this).data("value"),e=p(this).text();n.removeClass("selected"),p(this).addClass("selected"),r.text(e),s.val(t),p(".p-contact__item.is-select").find(".p-contact__error").remove(),r.removeClass("active"),c.removeClass("active")}),p(document).on("click",function(t){p(t.target).closest(".p-contact__select-custom").length||(r.removeClass("active"),c.removeClass("active"))}),p("input, textarea").on("touchstart click",function(t){t.stopPropagation()}),p('.p-contact__acceptance input[type="checkbox"]')),t=p(".confirm");_.on("click",function(t){t.stopPropagation()}),p(".p-contact__acceptance label").on("click",function(t){t.preventDefault();t=p(this).find('input[type="checkbox"]');t.prop("checked",!t.prop("checked")).trigger("change")}),t.prop("disabled",!0),_.on("change",function(){p(this).is(":checked")?t.prop("disabled",!1):t.prop("disabled",!0)}),p('input[name="your-name"]').on("input",function(){p(this).closest(".p-contact__item").find(".p-contact__error").remove()}),p('input[name="text-305"]').on("input",function(){p(this).closest(".p-contact__item").find(".p-contact__error").remove()}),p('input[name="tel-851"]').on("input",function(){p(this).closest(".p-contact__item").find(".p-contact__error").remove()}),p('input[name="your-email"]').on("input",function(){p(this).closest(".p-contact__item").find(".p-contact__error").remove()}),p('textarea[name="textarea-271"]').on("input",function(){p(this).closest(".p-contact__item").find(".p-contact__error").remove()}),p('input[name="your-name"]').on("keypress blur",function(t){console.log("お名前バリデーション発火",t.type),"keypress"===t.type&&13!==t.which||("keypress"===t.type&&t.preventDefault(),t=p(this).val().trim(),p(this).closest(".p-contact__item").find(".p-contact__error").remove(),t?t.length<2?p(this).closest(".p-contact__item").append('<p class="p-contact__error">お名前は2文字以上で入力してください。</p>'):/[0-9０-９a-zA-Zａ-ｚＡ-Ｚ]/.test(t)&&p(this).closest(".p-contact__item").append('<p class="p-contact__error">お名前に数字や英字は使用できません。</p>'):p(this).closest(".p-contact__item").append('<p class="p-contact__error">必須項目を入力してください。</p>'))}),p('input[name="text-305"]').on("keypress blur",function(t){"keypress"===t.type&&13!==t.which||("keypress"===t.type&&t.preventDefault(),t=p(this).val().trim(),p(this).closest(".p-contact__item").find(".p-contact__error").remove(),t?/^[ぁ-ん\s　]+$/.test(t)||p(this).closest(".p-contact__item").append('<p class="p-contact__error">ふりがなはひらがなで入力してください。</p>'):p(this).closest(".p-contact__item").append('<p class="p-contact__error">必須項目を入力してください。</p>'))}),p('input[name="your-email"]').on("keypress blur",function(t){"keypress"===t.type&&13!==t.which||("keypress"===t.type&&t.preventDefault(),t=p(this).val().trim(),p(this).closest(".p-contact__item").find(".p-contact__error").remove(),t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||p(this).closest(".p-contact__item").append('<p class="p-contact__error">メールアドレスの形式が正しくありません。</p>'):p(this).closest(".p-contact__item").append('<p class="p-contact__error">必須項目を入力してください。</p>'))});function l(){p("form.wpcf7-form").hide(),p(".p-contact__wrapper").hide(),p(".p-contact__button-group").hide(),p(".wpcf7-response-output").hide(),p(".p-contact__confirm-title").hide(),p(".p-contact__confirm-text-message").hide(),p(".c-title").css("display",""),p(".p-breadcrumb").css("display",""),p(".p-contact__content").append('<div class="p-contact__complete"><h2 class="p-contact__complete-title">送信が完了いたしました</h2><div class="p-contact__complete-text"><p>お問い合わせいただきありがとうございます。</p><p>お問い合わせを頂いた内容については、確認の上ご返信させていただきます。</p></div><div class="p-contact__complete-button"><a href="/" class="p-contact__complete-top-btn">TOPへ戻る</a></div></div>'),p("html, body").animate({scrollTop:0},400)}p(".confirm").on("click",function(t){t.preventDefault(),p(".p-contact__error").remove();var t=s.val(),e=p('input[name="your-name"]').val().trim(),c=p('input[name="text-305"]').val().trim(),n=p('input[name="your-email"]').val().trim(),o=!1,a=null;t&&-1!==["項目1","項目2","項目3"].indexOf(t)||(0===p(".p-contact__item.is-select").find(".p-contact__error").length&&p(".p-contact__item.is-select").append('<p class="p-contact__error">必須項目を選択してください。</p>'),a=a||p(".p-contact__item.is-select"),o=!0),e?e.length<2?(0===p('input[name="your-name"]').closest(".p-contact__item").find(".p-contact__error").length&&p('input[name="your-name"]').closest(".p-contact__item").append('<p class="p-contact__error">お名前は2文字以上で入力してください。</p>'),a=a||p('input[name="your-name"]').closest(".p-contact__item"),o=!0):/[0-9０-９a-zA-Zａ-ｚＡ-Ｚ]/.test(e)&&(0===p('input[name="your-name"]').closest(".p-contact__item").find(".p-contact__error").length&&p('input[name="your-name"]').closest(".p-contact__item").append('<p class="p-contact__error">お名前に数字や英字は使用できません。</p>'),a=a||p('input[name="your-name"]').closest(".p-contact__item"),o=!0):(0===p('input[name="your-name"]').closest(".p-contact__item").find(".p-contact__error").length&&p('input[name="your-name"]').closest(".p-contact__item").append('<p class="p-contact__error">必須項目を入力してください。</p>'),a=a||p('input[name="your-name"]').closest(".p-contact__item"),o=!0),c?/^[ぁ-ん\s　]+$/.test(c)||(0===p('input[name="text-305"]').closest(".p-contact__item").find(".p-contact__error").length&&p('input[name="text-305"]').closest(".p-contact__item").append('<p class="p-contact__error">ふりがなはひらがなで入力してください。</p>'),a=a||p('input[name="text-305"]').closest(".p-contact__item"),o=!0):(0===p('input[name="text-305"]').closest(".p-contact__item").find(".p-contact__error").length&&p('input[name="text-305"]').closest(".p-contact__item").append('<p class="p-contact__error">必須項目を入力してください。</p>'),a=a||p('input[name="text-305"]').closest(".p-contact__item"),o=!0),n?-1===n.indexOf("@")?(0===p('input[name="your-email"]').closest(".p-contact__item").find(".p-contact__error").length&&p('input[name="your-email"]').closest(".p-contact__item").append('<p class="p-contact__error">@を含むメールアドレスを入力してください。</p>'),a=a||p('input[name="your-email"]').closest(".p-contact__item"),o=!0):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)||(0===p('input[name="your-email"]').closest(".p-contact__item").find(".p-contact__error").length&&p('input[name="your-email"]').closest(".p-contact__item").append('<p class="p-contact__error">メールアドレスの形式が正しくありません。</p>'),a=a||p('input[name="your-email"]').closest(".p-contact__item"),o=!0):(0===p('input[name="your-email"]').closest(".p-contact__item").find(".p-contact__error").length&&p('input[name="your-email"]').closest(".p-contact__item").append('<p class="p-contact__error">必須項目を入力してください。</p>'),a=a||p('input[name="your-email"]').closest(".p-contact__item"),o=!0),o?(_.prop("checked",!1).trigger("change"),setTimeout(function(){var t=a.offset().top-100;window.scrollTo(0,t)},50)):(p(".p-contact__error").remove(),i={inquiry:t,inquiryText:r.text(),name:e,furigana:c,tel:p('input[name="tel-851"]').val(),email:n,message:p('textarea[name="textarea-271"]').val()},p(".c-title").css("display","none"),p(".p-breadcrumb").css("display","none"),p(".p-contact__content").prepend('<h2 class="p-contact__confirm-title">送信内容確認</h2><p class="p-contact__confirm-text-message">以下の内容で送信してよろしいですか?</p>'),p(".p-contact__select-custom").hide(),p(".p-contact__item.is-select").append('<div class="p-contact__confirm-text">'+i.inquiryText+"</div>"),p('input[name="your-name"]').hide().after('<div class="p-contact__confirm-text">'+i.name+"</div>"),p('input[name="text-305"]').hide().after('<div class="p-contact__confirm-text">'+i.furigana+"</div>"),p('input[name="tel-851"]').hide().after('<div class="p-contact__confirm-text">'+(i.tel||"未入力")+"</div>"),p('input[name="your-email"]').hide().after('<div class="p-contact__confirm-text">'+i.email+"</div>"),p('textarea[name="textarea-271"]').hide().after('<div class="p-contact__confirm-text p-contact__confirm-textarea">'+(i.message||"未入力")+"</div>"),p(".p-contact__policy").hide(),p(".p-contact__acceptance").hide(),p(".p-contact__confirm").eq(0).hide(),o=p(".p-contact__confirm").eq(1).find(".submit"),p(".p-contact__confirm").eq(1).before('<div class="p-contact__button-group"><button type="button" class="p-contact__back-btn">戻る</button></div>'),p(".p-contact__button-group").append(o),p(".p-contact__confirm").eq(1).hide(),p(".p-contact__button-group .submit").off("click").on("click",function(t){t.preventDefault(),t.stopPropagation();var e,t=p(this).closest("form")[0];t&&(e=new FormData(t),p.ajax({url:t.action,type:"POST",data:e,processData:!1,contentType:!1,success:function(t){console.log("送信成功"),l()},error:function(){console.log("送信失敗")}}))}),p("html, body").animate({scrollTop:0},400))}),p(document).on("click",".p-contact__back-btn",function(){location.reload()}),document.addEventListener("wpcf7mailsent",function(t){console.log("送信完了イベント発火"),l()},!1),document.addEventListener("wpcf7invalid",function(t){t.stopImmediatePropagation()},!0),document.addEventListener("wpcf7spam",function(t){t.stopImmediatePropagation()},!0),document.addEventListener("wpcf7mailfailed",function(t){t.stopImmediatePropagation()},!0),p(document).on("wpcf7invalid wpcf7spam wpcf7mailfailed wpcf7mailsent","form.wpcf7-form",function(t){setTimeout(function(){p(".wpcf7-response-output").remove(),p(".wpcf7-not-valid-tip").remove()},0)}),p(document).on("submit","form.wpcf7-form",function(t){return 0!==p(".p-contact__button-group").length||(t.preventDefault(),!1)})});